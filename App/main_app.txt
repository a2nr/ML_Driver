/*
 * main_app.cpp
 *
 *  Created on: Mar 19, 2017
 *      Author: mori3rti
 */
#include "CommandHandler.h"
#include "main.h"
#include "app.h"

#include "gpio.h"
#include "SerialUart.h"

#include <string.h>

class app
{
  private:

    uart1 serialBiasa;
    gpio ledBiasa;
    gpio tombolBiasa;
    const char * myString = "Hello World !!";
    /* data */
  public:
    app(/* args */)
    {
        LL_Init();
        SystemClock_Config();
        ledBiasa = gpio(GPIOA, 5);
        tombolBiasa = gpio(GPIOC, 13);
    }

    int run(void)
    {
        serialBiasa.init(9600);
        ledBiasa.asOutput();
        tombolBiasa.asInput();
        serialBiasa.write((const uint8_t *)myString,strlen(myString));
        for (;;)
        {
            ledBiasa.set(tombolBiasa.get());
        }
        return 0;
    }
};

int main(void)
{
    app myapp;

    return myapp.run();
}
